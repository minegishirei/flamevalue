"use strict";var l=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var R=(i,e)=>{for(var a in e)l(i,a,{get:e[a],enumerable:!0})},x=(i,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of V(e))!E.call(i,u)&&u!==a&&l(i,u,{get:()=>e[u],enumerable:!(o=N(e,u))||o.enumerable});return i};var T=i=>x(l({},"__esModule",{value:!0}),i);var S={};R(S,{GtmPlugin:()=>s.GtmSupport,GtmSupport:()=>n.GtmSupport,assertIsGtmId:()=>n.assertIsGtmId,createGtm:()=>b,default:()=>k,hasScript:()=>n.hasScript,loadScript:()=>n.loadScript,useGtm:()=>L});module.exports=T(S);var s=require("@gtm-support/core"),O=require("vue"),n=require("@gtm-support/core"),t;function A(i,e={id:""}){e={trackOnNextTick:!1,...e},t=new s.GtmSupport(e),i.config.globalProperties.$gtm=t,t.isInBrowserContext()&&(e.vueRouter&&P(i,e.vueRouter,e.ignoredViews,e.trackOnNextTick,e.vueRouterAdditionalEventData),t.options.enabled&&t.options.loadScript&&(Array.isArray(e.id)?e.id.forEach(a=>{if(typeof a=="string")(0,s.loadScript)(a,e);else{let o={...e};a.queryParams!=null&&(o.queryParams={...o.queryParams,...a.queryParams}),(0,s.loadScript)(a.id,o)}}):(0,s.loadScript)(e.id,e))),i.provide("gtm",e)}function P(i,e,a=[],o,u=()=>({})){function c(r,p){return r instanceof Error?!!(r.type&p):!1}e.afterEach(async(r,p,f)=>{var G,g,v;if(typeof r.name!="string"||Array.isArray(a)&&a.includes(r.name)||typeof a=="function"&&a(r,p))return;let d=r.meta&&typeof r.meta.gtm=="string"&&r.meta.gtm?r.meta.gtm:r.name;c(f,4)?t!=null&&t.debugEnabled()&&console.log(`[VueGtm]: '${d}' not tracked due to navigation aborted`):c(f,8)&&t!=null&&t.debugEnabled()&&console.log(`[VueGtm]: '${d}' not tracked due to navigation cancelled`);let y={...await u(r,p),...(G=r.meta)==null?void 0:G.gtmAdditionalEventData},m=((v=(g=e.options)==null?void 0:g.history)==null?void 0:v.base)??"";m.endsWith("/")||(m+="/"),m+=r.fullPath.startsWith("/")?r.fullPath.substring(1):r.fullPath,o?(0,O.nextTick)(()=>{t==null||t.trackView(d,m,y)}):t==null||t.trackView(d,m,y)})}function b(i){return{install:e=>A(e,i)}}var I={install:A};var k=I;function L(){return t}0&&(module.exports={GtmPlugin,GtmSupport,assertIsGtmId,createGtm,hasScript,loadScript,useGtm});
//# sourceMappingURL=index.cjs.map